<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="kanper tony_kanper@hotmail.com"><title>学习安卓开发<3> · 康帅傅的blog</title><meta name="description" content="学习安卓开发的记录"><meta name="keywords" content="JAVA 前端 Linux 学习"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/private.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/jquery.fancybox.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">康帅傅的blog</a></h3><div class="description"><p>个人技术生活记录</p></div></div></div><ul class="social-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="http://weibo.com/2766984081"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/tydic-kanper"><i class="fa fa-github"></i></a></li><li><a href="http://zhihu.com/people/tony_rui/"><i class="iconfont icon-zhihu"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><span>&</span><a href="https://github.com/tydic-kanper/hexo-theme-Anatole.git"> kanper</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div><div class="beian"> <a href="http://www.miitbeian.gov.cn/" target="_blank">备案/许可证编号：蜀ICP备18015843号</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/about">关于</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/link.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>学习安卓开发&lt;3&gt;</a></h3></div><div class="post-content"><p>从本文开始，将翻译谷歌官方文档，对官网的有些东西进行解释，一方面是增强自己对安卓开发的认识，另一方面是为英文基础普通的开发者提供参考</p>
<h1>应用组件</h1>
<p>应用组件是Android应用的基本构建基块。每个组件都是一个不同的点，系统可以通过它浸入你的应用。并非所有组件都是用户的实际入口点，有些组件相互依赖，但每个组件都以实体形式存在，并发挥特定作用-每个组件都是唯一的构建基块，有助于定义应用的总体行为。<br>
共有四种不同的应用组件类型，每种类型服务于不同的目的，并且具有定义组件的创建和销毁方式的不同生命周期。<br>
以下便是这四种用用组件类型：</p>
<p><strong>Activity</strong><br>
Activity 表示具有用户洁面的单一屏幕。例如，电子邮件应用可能具有一个显示新电子邮件列表的Activity、一个用于撰写电子邮件的Activity以及一个用户阅读电子邮件的Activity。尽管这些Activity 通过协作在电子邮件中形成了一种紧密结合的用户体验，但每一个Activity都独立于其他Activity而存在。因此，其他应用可以启动其中任何一个Activity（如果电子邮件应用允许）。例如，相机应用可以启动电子邮件应用内用户撰写新电子邮件的Activity，以便用户共享图片。</p>
<p><strong>服务</strong><br>
服务是一种在后台运行的组件，用于执行长时间运行的操作或为远程进行执行作业。服务不提供用户界面。例如，当用户位于其他应用中时，服务可能在后台播放音乐或者通过网络获取数据，但不会阻断用户与Activity 的交互。诸如Activity等其他组件可以启动服务，让其运行或者与其绑定以便与其进行交互。</p>
<p><strong>内容提供程序</strong><br>
内容提供程序管理一组共享的应用数据。你可以将数据存储在文件系统、SQLite数据库、网络上或者你的应用程序可以访问的任何其他永久性存储位置。其他应用可以通过内容提供程序查询数据，甚至修改数据（如果内容提供程序允许）。例如，Android系统可以提供管理用户联系人信息的内容提供程序。因此，任何具有适当权限的应用都可以查询内容提供程序的某一部分。（如ContactsContract.Data），以读取和写入有关特定人员的信息。</p>
<p>内容提供程序也适用于读取和写入你的应用不共享的私有数据。例如，记事本应用可以使用内容提供程序来保存笔记。</p>
<p><strong>广播接收器</strong><br>
广播接收器是一种用于响应系统范围广播通知的组件。许多广播都是由系统发起的，例如，通知屏幕已关闭，电池电量不足或已拍摄图片的广播。应用也可以发起广播，例如，通知其他应用某些数据已经下载至设备，并且可供使用。尽管广播接收器不会显示用户界面，但它们可以创建状态栏通知，在发生广播事件时提醒用户。但广播接收器更为常见的用途只是作为通向其他组件的“通道”，设计用于执行极少量的工作。例如，它可能会基于事件发起一项服务来执行某项工作。</p>
<p>Android系统设计的独特之处在于，任何应用都可以启动其他应用的组件。例如，如果你想让用户使用设备的相机拍摄照片，很可能有另一个应用可以执行这个操作，那么你的应用就可以利用该应用，而不是开发一个Activity来进行拍摄照片。你不需要集成甚至连接到该相机应用的代码，而是只需要启动拍摄照片的相机应用中的Activity。完成拍摄时，系统甚至会将照片返回你的应用，以便你的使用。对于用户而言，就好像相机真正是你应用的组成部分。</p>
<p>当系统启动某个组件时，会启动改应用的进程（如果尚未运行），并实例化该组件所需的类。例如，如果你的应用程序启动相机应用中拍摄照片的Activity，则该Activity会在属于相机应用的进程，而不是在你的应用的进程中运行。因此，与大多数其他系统上的应用不同，Android应用并没有单一的入口（例如，没有main()函数）。</p>
<p>由于系统在单独的进程中运行每一个应用，且其文件权限会限制对其他应用的访问，因此你的应用无法直接启动其他应用中的组件，但是Android系统却可以。因此，想要启动其他应用中的组件，你必须向系统传递一则消息，说明你想启动特定组件的Intent。系统随后便会为你自动该组件。</p>
<h2>启动组件</h2>
<p>四种组件类型中的三种-Activity、服务和广播接收器；都是通过名为Intent的异步消息进行启动。Intent会在运行时将各个组件相互绑定（你可以将Intent视为从其他组件请求操作的信使），无论组件属于你的应用还是其他应用。</p>
<p>Intent使用Intent对象创建，它定义的消息用于启动特定组件或特定类型的组件–Intent可以是显式的，也可以是隐式的。</p>
<p>对于Activity和服务，Intent定义要执行的操作（例如，“查看”或“发送”某个内容），并且可以指定要执行操作的数据的URI（已经正在启动的组件可能需要了解的信息）。例如，Intent传递的请求可以是启动一个显示图像或者打开网页的Activity。在某些情况下，你可以启动Activity来接收结果，在这种情况下，Activity也会在Intent中返回结果（例如，你可以发出一个Intent，让用户选取某位联系人并将其返回给你，返回Intent包括指向所选联系人的URI）。</p>
<p>对于广播接收器，Intent只会定义要广播的通知（例如，指示设备电池电量不足的广播只包含指示“电池电量不足”的已知操作字符串）。</p>
<p>Intent 不会启动另一个组件类型-内容提供程序，后者会在成为ContentResolver的请求目标时启动。内容解析程序通过内容提供程序处理所有直接事务，使得通过提供程序执行事务的组件可以无须执行事务，而是改为咋ContentResolver对象上调用方法，这会在内功提供程序与请求信息的组件之间留出一个抽象层（以确保安全）。</p>
<p>每种类型的组件有不同的启动方法：</p>
<ul>
<li>你可以通过将Intent传递到startActivity()或startActivityForResult()（当你想让Activity返回结果时）来启动Activit（或为其安排新任务）。</li>
<li>你可以通过将Intent传递到startService()来启动服务（或对执行中的服务下达新指令）。或者，你可以通过将Intent传递到bindService()来绑定到该服务。</li>
<li>你可以通过将Intent传到到sendBroadcast()、sendOrderedBroadcast()或者sendStickyBroadcast()等方法来发起广播；</li>
<li>你可以通过在ContentResolver上调用query()来对内容提供程序执行查询。</li>
</ul>
<h1>清单文件</h1>
<p>在Android系统启动应用组件之前，系统必须通过读取应用的AndroidManifest.xml 文件（“清单”文件）确认组件存在。你的应用必须在此文件中声明其所有组件，该文件必须位于应用项目目录的根目录中。</p>
<p>除了生命应用的组件外，清单文件还有许多其他作用，如：</p>
<ul>
<li>确定应用需要的任何用户权限，如互联网访问权限或对用户联系人的读写权限</li>
<li>根据应用使用的API，声明应用所需的最低API级别</li>
<li>声明应用使用或需要的硬件和软件功能，例如：相机、蓝牙服务或多触点屏幕</li>
<li>应用需要链接的API库（Android框架API除外），如Google地图</li>
<li>其他功能</li>
</ul>
<h2>声明组件</h2>
<p>清单文件的主要任务是告知系统有关应用组件的信息。例如，清单文件可以像下面这样声明Activity：</p>
<figure class="highlight xml"><figcaption><span>清单文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">...</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">android:icon</span>=<span class="string">"@drawable/app_icon.png"</span> <span class="attr">...</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.example.project.ExampleActivity"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">android:label</span>=<span class="string">"@string/example_label"</span> <span class="attr">...</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在&lt;application&gt;元素中，android:icon 属性指向标识应用的图标所对应的资源。<br>
在&lt;activity&gt;元素中，android:name 属性指定Activity子类的完全限定类名，android:label属性指定用做Activity的用户可见标签的字符串。<br>
你必须通过以下方式声明所有应用组件：</p>
<ul>
<li>Activity的&lt;activity&gt;元素</li>
<li>服务的&lt;service&gt;元素</li>
<li>广播接收器的&lt;receiver&gt;元素</li>
<li>内容提供程序的&lt;provider&gt;元素</li>
</ul>
<p>你包括在源代码中，但未在清单文件中声明的Activity、服务和内容提供程序对系统不可见，因此也永远不会运行。不过，广播接收器可以在清单文件中声明或在代码中动态创建（如BroadcastReceiver对象）并通过调用registerReceiver()在系统中注册。</p>
<h2>声明组件功能</h2>
<p>如上文启动组件中所述，你可以使用Intent来启动Activity、服务和广播接收器。您可以通过在 Intent 中显式命名目标组件（使用组件类名）来执行此操作。 不过，Intent 的真正强大之处在于隐式 Intent 概念。 隐式 Intent 的作用无非是描述要执行的操作类型（还可选择描述您想执行的操作所针对的数据），让系统能够在设备上找到可执行该操作的组件，并启动该组件。 如果有多个组件可以执行 Intent 所描述的操作，则由用户选择使用哪一个组件。</p>
<p>系统通过将接收到的Intent与设备上的其他应用的清单文件中提供的 Intent 过滤器进行比较来确定可以响应 Intent 的组件。</p>
<p>当您在应用的清单文件中声明 Activity 时，可以选择性地加入声明 Activity 功能的 Intent 过滤器，以便响应来自其他应用的 Intent。 您可以通过将 &lt;intent-filter&gt; 元素作为组件声明元素的子项进行添加来为您的组件声明 Intent 过滤器。</p>
<p>例如，如果您开发的电子邮件应用包含一个用于撰写新电子邮件的 Activity，则可以像下面这样声明一个 Intent 过滤器来响应“send” Intent（以发送新电子邮件）：</p>
<figure class="highlight xml"><figcaption><span>发送电子邮件清单</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-06-04</span><i class="fa fa-tag"></i><a class="tag" href="/categories/JAVA/" title="JAVA">JAVA </a><a class="tag" href="/categories/JAVA/android/" title="android">android </a><a class="tag" href="/tags/JAVA/" title="JAVA">JAVA </a><a class="tag" href="/tags/移动端/" title="移动端">移动端 </a><a class="tag" href="/tags/谷歌/" title="谷歌">谷歌 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://kanper.top/2018/06/04/学习安卓开发-3/,康帅傅的blog,学习安卓开发&lt;3&gt;,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/06/05/Java中的HashMap/" title="Java中的HashMap">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/05/15/学习安卓开发-2/" title="学习安卓开发&lt;2&gt;">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.7/dist/Valine.min.js?v=undefined"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:true || false, 
  verify:false|| false, 
  app_id:'StAvblPPgDl23l5szlQ0TiaH-gzGzoHsz',
  app_key:'QlhH2BOfWzBxGBNhi7ykcd45',
  placeholder:'你想对博主说什么啊...',
  path: window.location.pathname,
  avatar:'mm'
})</script><ul class="money"><li><p class="wechat">欢迎微信打赏支持建站</p><img src="/images/wechat.jpg" alt="wechat"></li><li><p class="alipay">欢迎支付宝打赏支持建站</p><img src="/images/alipay.jpg" alt="alipay"></li></ul></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.fancybox.min.js"></script><script src="/js/wrapImg.js"></script><script src="/js/jquery.appear.js"></script></body></html>